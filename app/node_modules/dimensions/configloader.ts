import RoutingServer from 'dimensions/routingserver';

export interface ConfigServer {
  listenPort: number;
  routingServers: RoutingServer[];
}

export interface LogOptions {
  clientTimeouts: boolean;
  clientConnect: boolean;
  clientDisconnect: boolean;
  clientError: boolean;
  tServerConnect: boolean;
  tServerDisconnect: boolean;
  tServerError: boolean;
  clientBlocked: boolean;
  extensionLoad: boolean;
  outputToConsole: boolean;
  extensionError: boolean;
}

export interface FakeVersion {
  enabled: boolean;
  terrariaVersion: number;
}

export interface BlackList {
  enabled: boolean;
  apiKey: string;
} 

export interface RestApi {
  enabled: boolean;
  port: number;
}

export interface ConnectionLimit {
  enabled: boolean;
  connectionLimitPerIP: number;
  kickReason: string;
}

export interface ConnectionRateLimit {
  enabled: boolean;
  connectionRateLimitPerIP: number;
}

export interface RedisConfig {
  enabled: boolean;
  host: string;
  port: number;
}

export interface ProjectileSync {
  enabled: boolean;
  type: "clear" | "keep";
  when: "ssc" | "always";
}

export interface SwitchingSynchronization {
  projectiles: ProjectileSync;
}

export interface ConfigOptions {
  socketTimeout: number;
  socketNoDelay: boolean;
  currentTerrariaVersion: number;
  fakeVersion: FakeVersion;
  restApi: RestApi;
  blockInvis: boolean;
  blacklist: BlackList;
  log: LogOptions;
  synchronization: SwitchingSynchronization;
  connectionLimit: ConnectionLimit;
  connectionRateLimit: ConnectionRateLimit;
  redis: RedisConfig;
}

export interface Config {
  servers: ConfigServer[];
  options: ConfigOptions;
}


export const ConfigSettings: Config = require(`../../../config.js`).ConfigSettings;